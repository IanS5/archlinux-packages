pkgname="kubernetes-server"
pkgver="1.7.13"
pkgrel=1
arch=('x86_64')
depends=('ethtool' 'socat' 'ebtables' 'docker')
pkgdesc="essential kubernetes applications, along with systemd service files"
source=("https://github.com/kubernetes/kubernetes/releases/download/v${pkgver}/kubernetes.tar.gz"
        "https://storage.googleapis.com/kubernetes-release/release/v${pkgver}/${pkgname}-linux-amd64.tar.gz"
        "kubelet.service")

build() {
    echo "skipping build step - nothing to build"
}

package() {
    cd "kubernetes"
    install -Dm775 server/bin/kube-proxy "$pkgdir"/usr/bin/kube-proxy
    install -Dm775 server/bin/kubectl    "$pkgdir"/usr/bin/kubectl
    install -Dm775 server/bin/kubelet    "$pkgdir"/usr/bin/kubelet
    install -Dm775 server/bin/kubeadm    "$pkgdir"/usr/bin/kubeadm

    install -Dm777 ../kubelet.service   "$pkgdir"/etc/systemd/system/kubelet.service
    
}
md5sums=('2023d73bcc7619367dfe1db6b8f9136a'
         '01281562af13019ec703ec88c32ce3be'
         'a4423f0cdcac7176a465855efaaeea9e')
